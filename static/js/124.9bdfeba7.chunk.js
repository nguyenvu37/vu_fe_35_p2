(this.webpackJsonpvu_fe_35_p2=this.webpackJsonpvu_fe_35_p2||[]).push([[124],{118:function(e,t,a){"use strict";a.r(t);var c=a(6),n=a(538),r=a.n(n),u=a(7),o=a(539),s=a(530),l=a(0),i=a.n(l),d=a(649),b=a(556),f=a(47),O=a.n(f),p=a(43),j=a(62),m=a(2),h=a(63),g=a(44);t.default=Object(m.i)((function(e){var t=Object(b.a)("translation").t,a=Object(l.useState)("1234"),n=Object(s.a)(a,2),f=n[0],m=n[1],v=Object(l.useState)("04/28"),x=Object(s.a)(v,2),y=x[0],S=x[1],E=Object(l.useState)(""),I=Object(s.a)(E,2),k=I[0],C=I[1],N=Object(l.useState)("NGUYEN ANH VU"),w=Object(s.a)(N,2),q=w[0],J=w[1],_=Object(l.useState)("4231412342345234"),A=Object(s.a)(_,2),F=A[0],T=A[1],Y=JSON.parse(localStorage.getItem("order"))||{},D=Object(l.useState)([]),M=Object(s.a)(D,2),U=M[0],V=M[1],B=Object(g.b)();Object(l.useEffect)((function(){null!==localStorage.getItem("order")&&function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.default)("order","get",null).then((function(e){e&&200===e.status&&e.data?V(Object(u.a)(e.data)):V([])}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var G=function(){var a=Object(o.a)(r.a.mark((function a(n){var u,o,s,l,i,d,b,f,p,m,g,v;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),null===localStorage.getItem("Token")){a.next=26;break}if(!(U.length>0)){a.next=18;break}if(u=U.filter((function(e){return e.userId===Y.userId})),o=Y.data,!(u.length>0)){a.next=11;break}return a.next=8,o.forEach((function(e){var t=u[0].data.findIndex((function(t){return t.code===e.code}));if(-1!==t)u[0].data[t]=Object(c.a)(Object(c.a)({},u[0].data[t]),{},{quantity:u[0].data[t].quantity+e.quantity});else{var a=Object(c.a)(Object(c.a)({},e),{},{status:"paid"});u[0].data.unshift(Object(c.a)({},a))}}));case 8:Object(j.default)("order/".concat(u[0].id),"put",Object(c.a)({},u[0])).then((function(){Object(j.default)("carts/".concat(JSON.parse(localStorage.getItem("Token")).id),"delete",null).then((function(a){localStorage.removeItem("idCustomer"),localStorage.removeItem("order"),O.a.success(t("pay-success.title")),e.history.push("/")}))})),a.next=16;break;case 11:return s=[],a.next=14,Y.data.forEach((function(e){var t=Object(c.a)(Object(c.a)({},e),{},{status:"paid"});s.push(Object(c.a)({},t))}));case 14:l=Object(c.a)(Object(c.a)({},Y),{},{data:[].concat(s)}),Object(j.default)("order","post",Object(c.a)({},l)).then((function(){Object(j.default)("carts/".concat(JSON.parse(localStorage.getItem("Token")).id),"delete",null).then((function(){localStorage.removeItem("idCustomer"),localStorage.removeItem("order"),O.a.success(t("pay-success.title")),e.history.push("/")}))}));case 16:a.next=24;break;case 18:return i=[],a.next=21,Y.data.forEach((function(e){var t=Object(c.a)(Object(c.a)({},e),{},{status:"paid"});i.push(Object(c.a)({},t))}));case 21:return d=Object(c.a)(Object(c.a)({},Y),{},{data:[].concat(i)}),a.next=24,Object(j.default)("order","post",Object(c.a)({},d)).then((function(){Object(j.default)("carts/".concat(JSON.parse(localStorage.getItem("Token")).id),"delete",null).then((function(){localStorage.removeItem("idCustomer"),localStorage.removeItem("order"),O.a.success(t("pay-success.title")),e.history.push("/")}))}));case 24:a.next=47;break;case 26:if(!(U.length>0)){a.next=42;break}if(b=U.filter((function(e){return e.userId===Y.userId})),f=Y.data,!(b.length>0)){a.next=35;break}return a.next=32,f.forEach((function(e){var t=b[0].data.findIndex((function(t){return t.code===e.code}));if(-1!==t)b[0].data[t]=Object(c.a)(Object(c.a)({},b[0].data[t]),{},{quantity:b[0].data[t].quantity+e.quantity});else{var a=Object(c.a)(Object(c.a)({},e),{},{status:"paid"});b[0].data.unshift(Object(c.a)({},a))}}));case 32:Object(j.default)("order/".concat(b[0].id),"put",Object(c.a)({},b[0])).then((function(){localStorage.clear(),O.a.success(t("pay-success.title")),e.history.push("/"),B(Object(h.actAddCart)([]))})),a.next=40;break;case 35:return p=[],a.next=38,Y.data.forEach((function(e){var t=Object(c.a)(Object(c.a)({},e),{},{status:"paid"});p.push(Object(c.a)({},t))}));case 38:m=Object(c.a)(Object(c.a)({},Y),{},{data:[].concat(p)}),Object(j.default)("order","post",Object(c.a)({},m)).then((function(a){localStorage.clear(),O.a.success(t("pay-success.title")),e.history.push("/"),B(Object(h.actAddCart)([]))}));case 40:a.next=47;break;case 42:return g=[],a.next=45,Y.data.forEach((function(e){var t=Object(c.a)(Object(c.a)({},e),{},{status:"paid"});g.push(Object(c.a)({},t))}));case 45:v=Object(c.a)(Object(c.a)({},Y),{},{data:[].concat(g)}),Object(j.default)("order","post",Object(c.a)({},v)).then((function(a){localStorage.clear(),O.a.success("Success message",t("pay-success.title")),e.history.push("/"),B(Object(h.actAddCart)([]))}));case 47:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return i.a.createElement("main",null,null!==localStorage.getItem("order")?i.a.createElement("div",{className:"box",style:{margin:"50px auto",display:"flex",alignItems:"center",width:"50%",height:"470px"}},i.a.createElement(d.a,{cvc:f,expiry:y,focused:k,name:q,number:F}),i.a.createElement("form",{className:"card-credit",onSubmit:function(e){return G(e)}},i.a.createElement("input",{type:"tel",name:"number",placeholder:"Card Number",value:F,onChange:function(e){return T(e.target.value)},onFocus:function(e){return C(e.target.name)}}),i.a.createElement("input",{type:"text",name:"name",placeholder:"Name",value:q,onChange:function(e){return J(e.target.value)},onFocus:function(e){return C(e.target.name)}}),i.a.createElement("input",{type:"text",name:"expiry",placeholder:"MM/YY Expiry",value:y,onChange:function(e){return S(e.target.value)},onFocus:function(e){return C(e.target.name)}}),i.a.createElement("input",{type:"tel",name:"cvc",placeholder:"CVC",value:f,onChange:function(e){return m(e.target.value)},onFocus:function(e){return C(e.target.name)}}),i.a.createElement("button",{className:"myButton"},"Pay"))):i.a.createElement("div",{className:"box",style:{height:"500px",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},i.a.createElement("h4",null,t("nothing-info")),i.a.createElement(p.b,{className:"buy",to:"/cart"},t("cart-now"))))}))}}]);
//# sourceMappingURL=124.9bdfeba7.chunk.js.map