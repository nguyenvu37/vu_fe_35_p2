{"version":3,"sources":["pages/user-page/login-page/loginPage.js","common/constCommon.js","common/validate.js","common/FormError.js"],"names":["withRouter","props","t","useTranslation","dispatchLogin","useDispatch","loggedIn","useSelector","state","users","useState","email","errorMessage","password","stateInput","setStateInput","inputEmail","useRef","inputPassword","handleInputValidate","e","name","target","validateInput","getValueInput","newState","handleSubmit","a","preventDefault","current","value","NotificationManager","warning","callApi","then","res","data","role","localStorage","setItem","JSON","stringify","success","actLogin","error","getItem","history","length","push","goBack","className","style","minHeight","textShadow","boxShadow","onClick","onSubmit","type","ref","onKeyUp","to","marginLeft","firstname","lastname","phone","fullname","address","checkingText","pass","i18next","exec","passConfirm","getTranslationCategory","category","FormError"],"mappings":"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","file":"static/js/90.eacb411e.chunk.js","sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport FormError from \"../../../common/FormError\";\r\nimport { NotificationManager } from \"react-notifications\";\r\nimport callApi from \"../../../common/callApi\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { actLogin } from \"../../../actions/actions\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { getValueInput, validateInput } from \"../../../common/validate\";\r\n\r\nfunction LoginPage(props) {\r\n  const { t } = useTranslation(\"translation\");\r\n  const dispatchLogin = useDispatch();\r\n  const loggedIn = useSelector((state) => state.users.loggedIn);\r\n  const [stateInput, setStateInput] = useState({\r\n    email: {\r\n      errorMessage: \"\",\r\n    },\r\n    password: {\r\n      errorMessage: \"\",\r\n    },\r\n  });\r\n\r\n  const inputEmail = useRef();\r\n  const inputPassword = useRef();\r\n\r\n  const handleInputValidate = (e) => {\r\n    const { name } = e.target;\r\n    const { errorMessage } = validateInput(\r\n      name,\r\n      getValueInput(name, inputEmail, \"\", \"\", \"\", inputPassword)\r\n    );\r\n    const newState = { ...stateInput[name] };\r\n    newState.errorMessage = errorMessage;\r\n    setStateInput({ ...stateInput, [name]: newState });\r\n  };\r\n\r\n  const handleValidationSubmit = () => {\r\n    if (\r\n      stateInput.password.errorMessage !== \"\" ||\r\n      stateInput.email.errorMessage !== \"\" ||\r\n      inputPassword.current.value === \"\" ||\r\n      inputEmail.current.value === \"\"\r\n    ) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (await !handleValidationSubmit()) {\r\n      return NotificationManager.warning(t(\"login.format\"));\r\n    } else {\r\n      callApi(`users?email=${inputEmail.current.value}`, \"Get\", null).then(\r\n        (res) => {\r\n          if (\r\n            res.data[0] &&\r\n            res.data[0].password === inputPassword.current.value &&\r\n            res.data[0].role === \"menber\"\r\n          ) {\r\n            localStorage.setItem(\r\n              \"Token\",\r\n              JSON.stringify({\r\n                ...res.data[0],\r\n                password: \"******\",\r\n                role: \"***\",\r\n              })\r\n            );\r\n            NotificationManager.success(t(\"login.success\"));\r\n            dispatchLogin(actLogin());\r\n          } else {\r\n            NotificationManager.error(t(\"login.err\"));\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleRegisterPage = () => {\r\n    props.history.push(\"/register\");\r\n  };\r\n\r\n  if (loggedIn || localStorage.getItem(\"Token\") !== null) {\r\n    props.history.length <= 2\r\n      ? props.history.push(\"/\")\r\n      : props.history.goBack();\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"login\" style={{ minHeight: \"500px\" }}>\r\n        <div className=\"box\">\r\n          <div className=\"login__content\">\r\n            <div className=\"login__content__title title-content btn-form\">\r\n              <h1 style={{ textShadow: \"-2px 2px 2px rgba(229,229,229,0.74)\" }}>\r\n                {t(\"login.h1\")}\r\n              </h1>\r\n              <div className=\"login__content__title__btn btn-form\">\r\n                <button\r\n                  style={{ boxShadow: \"3px 4px 5px 0px rgba(0,0,0,0.75)\" }}\r\n                  onClick={handleRegisterPage}\r\n                >\r\n                  {t(\"login.btn-register\")}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"login__content__form form\">\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"login__content__form__title\">\r\n                  <h3\r\n                    style={{\r\n                      textShadow: \"-2px 2px 2px rgba(229,229,229,0.74)\",\r\n                    }}\r\n                  >\r\n                    {t(\"login.h3\")}\r\n                  </h3>\r\n                  <p>{t(\"login.p\")}</p>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    {t(\"login.email\")} <span>*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    ref={inputEmail}\r\n                    name=\"email\"\r\n                    onKeyUp={handleInputValidate}\r\n                  />\r\n                  <FormError errorMessage={stateInput.email.errorMessage} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    {t(\"login.password\")} <span>*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    ref={inputPassword}\r\n                    name=\"password\"\r\n                    onKeyUp={handleInputValidate}\r\n                  />\r\n                  <FormError errorMessage={stateInput.password.errorMessage} />\r\n                </div>\r\n                <div className=\"login__content__form__btn btn-form\">\r\n                  <Link to=\"/recover\">{t(\"forget-pass\")}</Link>\r\n                  <button\r\n                    style={{\r\n                      boxShadow: \"3px 4px 5px 0px rgba(0,0,0,0.75)\",\r\n                      marginLeft: \"10px\",\r\n                    }}\r\n                  >\r\n                    {t(\"login.btn-login\")}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default withRouter(LoginPage);\r\n","export const email = /\\S+@\\S+\\.\\S+/;\r\nexport const firstname = /^[a-zA-Z]+$/;\r\nexport const lastname = /^[a-zA-Z]+$/;\r\nexport const phone = /^\\d{10}$/;\r\nexport const password = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/;\r\nexport const fullname = /^[a-zA-Z ]+$/;\r\nexport const address = /^[a-zA-Z0-9\\s,-]*$/;\r\n","import i18next from \"i18next\";\r\nimport {\r\n  address,\r\n  email,\r\n  firstname,\r\n  fullname,\r\n  lastname,\r\n  password,\r\n  phone,\r\n} from \"./constCommon\";\r\n\r\nexport const validateInput = (type, checkingText, pass) => {\r\n  if (checkingText === \"\") {\r\n    return { errorMessage: i18next.t(\"validate.require\") };\r\n  }\r\n\r\n  if (type === \"email\") {\r\n    const regexp = email;\r\n    const checkingResult = regexp.exec(checkingText);\r\n    if (checkingResult !== null) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.email\"),\r\n      };\r\n    }\r\n  }\r\n\r\n  if (type === \"firstname\") {\r\n    const regexp = firstname;\r\n    const checkingResult = regexp.exec(checkingText);\r\n    if (checkingResult !== null) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.firstname\"),\r\n      };\r\n    }\r\n  }\r\n\r\n  if (type === \"lastname\") {\r\n    const regexp = lastname;\r\n    const checkingResult = regexp.exec(checkingText);\r\n    if (checkingResult !== null) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.lastname\"),\r\n      };\r\n    }\r\n  }\r\n\r\n  if (type === \"phone\") {\r\n    const regexp = phone;\r\n    const checkingResult = regexp.exec(checkingText);\r\n    if (checkingResult !== null) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.phone\"),\r\n      };\r\n    }\r\n  }\r\n\r\n  if (type === \"password\") {\r\n    const regexp = password;\r\n    const checkingResult = regexp.exec(checkingText);\r\n    if (checkingResult !== null) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.password\"),\r\n      };\r\n    }\r\n  }\r\n\r\n  if (type === \"confirmPass\") {\r\n    const regexPass = pass;\r\n    if (checkingText === regexPass) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.confirm\"),\r\n      };\r\n    }\r\n  }\r\n\r\n  if (type === \"fullname\") {\r\n    const regexp = fullname;\r\n    const checkingResult = regexp.exec(checkingText);\r\n    if (checkingResult !== null) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.fullname\"),\r\n      };\r\n    }\r\n  }\r\n\r\n  if (type === \"address\") {\r\n    const regexp = address;\r\n    const checkingResult = regexp.exec(checkingText);\r\n    if (checkingResult !== null) {\r\n      return { errorMessage: \"\" };\r\n    } else {\r\n      return {\r\n        errorMessage: i18next.t(\"validate.address\"),\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nexport const getValueInput = (\r\n  name,\r\n  email,\r\n  firstname,\r\n  lastname,\r\n  phone,\r\n  pass,\r\n  passConfirm,\r\n  fullname,\r\n  address\r\n) => {\r\n  switch (name) {\r\n    case \"email\":\r\n      return email.current.value;\r\n    case \"firstname\":\r\n      return firstname.current.value;\r\n    case \"lastname\":\r\n      return lastname.current.value;\r\n    case \"phone\":\r\n      return phone.current.value;\r\n    case \"password\":\r\n      return pass.current.value;\r\n    case \"confirmPass\":\r\n      return passConfirm.current.value;\r\n    case \"fullname\":\r\n      return fullname.current.value;\r\n    case \"address\":\r\n      return address.current.value;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n\r\nexport const getTranslationCategory = (category) => {\r\n  switch (category) {\r\n    case \"cosmetic\":\r\n      return i18next.t(\"grid.category1\");\r\n    case \"makeup\":\r\n      return i18next.t(\"grid.category2\");\r\n    case \"perfume\":\r\n      return i18next.t(\"grid.category3\");\r\n    case \"lotions\":\r\n      return i18next.t(\"grid.menu1_1\");\r\n    case \"mask\":\r\n      return i18next.t(\"grid.menu1_2\");\r\n    case \"cleanser\":\r\n      return i18next.t(\"grid.menu1_3\");\r\n    case \"lipstick\":\r\n      return i18next.t(\"grid.menu2_1\");\r\n    case \"mascara\":\r\n      return i18next.t(\"grid.menu2_2\");\r\n    case \"blusher\":\r\n      return i18next.t(\"grid.menu2_3\");\r\n    default:\r\n      return category;\r\n  }\r\n};\r\n","import React from \"react\";\r\n\r\nconst FormError = (props) => {\r\n  return (\r\n    <div className=\"text-left text-danger font-italic\">\r\n      {props.errorMessage}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FormError;\r\n"],"sourceRoot":""}