{"version":3,"sources":["pages/user-page/profile/profile.js","common/calculation.js","pages/user-page/profile/profileItem.js"],"names":["withRouter","props","t","useTranslation","useState","dataCart","setDataCart","dataOrder","setDataOrder","data","setData","profile","JSON","parse","localStorage","getItem","useEffect","fetchDataCart","a","callApi","id","then","res","status","undefined","orders","fetchDataOrder","quanCart","length","getQuantity","quanOrder","dataProfile","totalProduct","paid","unpaid","sum","getSummary","toString","replace","className","src","require","alt","style","textTransform","firstName","lastName","email","phone","width","onClick","history","push","arr","map","item","parseInt","quantity","Math","floor","price","discount","reduce","b","getTotal","getPrice","getKeywordText","str","toUpperCase","split","filter","x","join","getKeywordId","formCurencyVN","toLocaleString","currency","ProfileItem","fontSize"],"mappings":"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","file":"static/js/97.c77fc011.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { getQuantity, getSummary } from \"../../../common/calculation\";\r\nimport callApi from \"../../../common/callApi\";\r\nimport ProfileItem from \"./profileItem\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Profile = (props) => {\r\n  const { t } = useTranslation(\"translation\");\r\n  const [dataCart, setDataCart] = useState([]);\r\n  const [dataOrder, setDataOrder] = useState([]);\r\n  const [data, setData] = useState([]);\r\n  const profile = JSON.parse(localStorage.getItem(\"Token\")) || {};\r\n\r\n  useEffect(() => {\r\n    const fetchDataCart = async () => {\r\n      await callApi(\r\n        `carts?userId=${JSON.parse(localStorage.getItem(\"Token\")).id}`,\r\n        \"get\",\r\n        null\r\n      ).then((res) => {\r\n        if (res && res.status === 200 && res.data) {\r\n          if (res.data[0] !== undefined) {\r\n            const orders = [...res.data][0].data;\r\n            setDataCart([...orders]);\r\n          } else setDataCart([]);\r\n        } else setDataCart([]);\r\n      });\r\n    };\r\n\r\n    const fetchDataOrder = async () => {\r\n      await callApi(\r\n        `order?userId=${JSON.parse(localStorage.getItem(\"Token\")).id}`,\r\n        \"get\",\r\n        null\r\n      ).then((res) => {\r\n        if (res && res.status === 200 && res.data) {\r\n          if (res.data[0] !== undefined) {\r\n            const orders = [...res.data][0].data;\r\n            setDataOrder([...orders]);\r\n          } else setDataOrder([]);\r\n        } else setDataOrder([]);\r\n      });\r\n    };\r\n\r\n    fetchDataCart();\r\n    fetchDataOrder();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const quanCart = dataCart.length > 0 ? getQuantity(dataCart) : 0;\r\n    const quanOrder = dataOrder.length > 0 ? getQuantity(dataOrder) : 0;\r\n    const summary = dataOrder.length > 0 ? getSummary(dataOrder) : 0;\r\n    let dataProfile = {\r\n      totalProduct: quanCart + quanOrder,\r\n      paid: quanOrder,\r\n      unpaid: quanCart,\r\n      sum: summary.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\"),\r\n    };\r\n    setData({ ...dataProfile });\r\n  }, [dataCart, dataOrder]);\r\n\r\n  return (\r\n    <main>\r\n      <section>\r\n        <div className=\"box\">\r\n          <div className=\"profile\">\r\n            <aside>\r\n              <div className=\"profile__info\">\r\n                <h4>{t(\"profile.h4\")}</h4>\r\n                <div className=\"profile__info__avata\">\r\n                  <img src={require(\"../../../assets/img/avata.png\")} alt=\"\" />\r\n                </div>\r\n                <div className=\"profile__info__content\">\r\n                  <div className=\"profile-group\">\r\n                    <span>{t(\"profile.name\")}:</span>\r\n                    <p style={{ textTransform: \"uppercase\" }}>\r\n                      {profile.firstName + \" \" + profile.lastName}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"profile-group\">\r\n                    <span>{t(\"profile.email\")}:</span>\r\n                    <p>{profile.email}</p>\r\n                  </div>\r\n                  <div className=\"profile-group\">\r\n                    <span>{t(\"profile.phone\")}:</span>\r\n                    <p>{profile.phone}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </aside>\r\n            <article>\r\n              <div className=\"profile__table cart__content__table\">\r\n                <table>\r\n                  <tbody>\r\n                    <tr>\r\n                      <th style={{ width: \"150px\" }}>{t(\"profile.th1\")}</th>\r\n                      <th>{t(\"profile.th2\")}</th>\r\n                      <th>{t(\"profile.th3\")}</th>\r\n                      <th style={{ width: \"150px\" }}>{t(\"profile.th4\")}</th>\r\n                    </tr>\r\n                  </tbody>\r\n                  <tbody>\r\n                    <ProfileItem data={data} />\r\n                  </tbody>\r\n                </table>\r\n                <div className=\"profile__table__btn cart__content__btn\">\r\n                  <button\r\n                    onClick={() => props.history.push(\"/editinformation\")}\r\n                  >\r\n                    {t(\"profile.btn-edit\")}\r\n                  </button>\r\n                  <button onClick={() => props.history.push(\"/history-order\")}>\r\n                    {t(\"profile.btn-order\")}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </article>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default withRouter(Profile);\r\n","export const getSummary = (arr) => {\r\n  return arr\r\n    .map(\r\n      (item) =>\r\n        parseInt(item.quantity) *\r\n        Math.floor(item.price * ((100 - item.discount) / 100))\r\n    )\r\n    .reduce((a, b) => a + b, 0);\r\n};\r\n\r\nexport const getTotal = (data, quantity) => {\r\n  return (\r\n    Math.floor(data.price * ((100 - data.discount) / 100)) * parseInt(quantity)\r\n  );\r\n};\r\n\r\nexport const getPrice = (data) => {\r\n  return Math.floor(data.price * ((100 - data.discount) / 100));\r\n};\r\n\r\nexport const getQuantity = (arr) => {\r\n  return arr.map((item) => item.quantity).reduce((a, b) => a + b, 0);\r\n};\r\n\r\nexport const getKeywordText = (str) => {\r\n  return str\r\n    .toUpperCase()\r\n    .split(\" \")\r\n    .filter((x) => x !== \"\")\r\n    .join(\"\");\r\n};\r\n\r\nexport const getKeywordId = (str) => {\r\n  return str\r\n    .toUpperCase()\r\n    .split(\"-\")\r\n    .filter((x) => x !== \"-\")\r\n    .join(\"\");\r\n};\r\n\r\nexport function formCurencyVN(price) {\r\n  return price.toLocaleString(\"it-IT\", {\r\n    style: \"currency\",\r\n    currency: \"VND\",\r\n  });\r\n}\r\n","import React from \"react\";\r\n\r\nconst ProfileItem = (props) => {\r\n  const { data } = props;\r\n  return (\r\n    <tr>\r\n      <td style={{ fontSize: \"20px\" }}>{data.totalProduct}</td>\r\n      <td style={{ fontSize: \"20px\" }}>{data.paid}</td>\r\n      <td style={{ fontSize: \"20px\" }}>{data.unpaid}</td>\r\n      <td>\r\n        <span className=\"price\" style={{ fontSize: \"20px\" }}>\r\n          {data.sum}\r\n          <small>đ</small>\r\n        </span>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default ProfileItem;\r\n"],"sourceRoot":""}