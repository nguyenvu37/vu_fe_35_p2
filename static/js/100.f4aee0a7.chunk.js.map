{"version":3,"sources":["pages/user-page/edit-profile/editProfile.js","common/FormError.js"],"names":["withRouter","props","t","useTranslation","useState","firstname","errorMessage","lastname","email","phone","password","confirmPass","stateInput","setStateInput","inputFirstname","useRef","inputEmail","inputLastname","inputPhone","inputPassword","inputConfirmPass","useEffect","localStorage","getItem","data","JSON","parse","current","value","firstName","lastName","handleInputValidate","e","name","target","type","checkingText","exec","validateInput","getValueInput","newState","handleLogin","user","id","role","callApi","then","res","status","setItem","stringify","NotificationManager","success","history","push","error","className","style","textShadow","textTransform","onSubmit","preventDefault","confirmPassword","warning","ref","onKeyUp","disabled","background","boxShadow","onClick","goBack","FormError"],"mappings":"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","file":"static/js/100.f4aee0a7.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport FormError from \"../../../common/FormError\";\r\nimport { NotificationManager } from \"react-notifications\";\r\nimport callApi from \"../../../common/callApi\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nfunction EditProfile(props) {\r\n  const { t } = useTranslation(\"translation\");\r\n  const [stateInput, setStateInput] = useState({\r\n    firstname: {\r\n      errorMessage: \"\",\r\n    },\r\n    lastname: {\r\n      errorMessage: \"\",\r\n    },\r\n    email: {\r\n      errorMessage: \"\",\r\n    },\r\n    phone: {\r\n      errorMessage: \"\",\r\n    },\r\n    password: {\r\n      errorMessage: \"\",\r\n    },\r\n    confirmPass: {\r\n      errorMessage: \"\",\r\n    },\r\n  });\r\n\r\n  const inputFirstname = useRef();\r\n  const inputEmail = useRef();\r\n  const inputLastname = useRef();\r\n  const inputPhone = useRef();\r\n  const inputPassword = useRef();\r\n  const inputConfirmPass = useRef();\r\n\r\n  const getValueInput = (name) => {\r\n    switch (name) {\r\n      case \"email\":\r\n        return inputEmail.current.value;\r\n      case \"firstname\":\r\n        return inputFirstname.current.value;\r\n      case \"lastname\":\r\n        return inputLastname.current.value;\r\n      case \"phone\":\r\n        return inputPhone.current.value;\r\n      case \"password\":\r\n        return inputPassword.current.value;\r\n      case \"confirmPass\":\r\n        return inputConfirmPass.current.value;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const validateInput = (type, checkingText) => {\r\n    if (checkingText === \"\") {\r\n      return { errorMessage: t(\"validate.require\") };\r\n    }\r\n\r\n    if (type === \"email\") {\r\n      const regexp = /\\S+@\\S+\\.\\S+/;\r\n      const checkingResult = regexp.exec(checkingText);\r\n      if (checkingResult !== null) {\r\n        return { errorMessage: \"\" };\r\n      } else {\r\n        return {\r\n          errorMessage: t(\"validate.email\"),\r\n        };\r\n      }\r\n    }\r\n\r\n    if (type === \"firstname\") {\r\n      const regexp = /^[a-zA-Z]+$/;\r\n      const checkingResult = regexp.exec(checkingText);\r\n      if (checkingResult !== null) {\r\n        return { errorMessage: \"\" };\r\n      } else {\r\n        return {\r\n          errorMessage: t(\"validate.firstname\"),\r\n        };\r\n      }\r\n    }\r\n\r\n    if (type === \"lastname\") {\r\n      const regexp = /^[a-zA-Z]+$/;\r\n      const checkingResult = regexp.exec(checkingText);\r\n      if (checkingResult !== null) {\r\n        return { errorMessage: \"\" };\r\n      } else {\r\n        return {\r\n          errorMessage: t(\"validate.lastname\"),\r\n        };\r\n      }\r\n    }\r\n\r\n    if (type === \"phone\") {\r\n      const regexp = /^\\d{10}$/;\r\n      const checkingResult = regexp.exec(checkingText);\r\n      if (checkingResult !== null) {\r\n        return { errorMessage: \"\" };\r\n      } else {\r\n        return {\r\n          errorMessage: t(\"validate.phone\"),\r\n        };\r\n      }\r\n    }\r\n\r\n    if (type === \"password\") {\r\n      const regexp = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/;\r\n      const checkingResult = regexp.exec(checkingText);\r\n      if (checkingResult !== null) {\r\n        return { errorMessage: \"\" };\r\n      } else {\r\n        return {\r\n          errorMessage: t(\"validate.password\"),\r\n        };\r\n      }\r\n    }\r\n\r\n    if (type === \"confirmPass\") {\r\n      const regexPass = inputPassword.current.value;\r\n      if (checkingText === regexPass) {\r\n        return { errorMessage: \"\" };\r\n      } else {\r\n        return {\r\n          errorMessage: t(\"validate.confirm\"),\r\n        };\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"Token\") !== null) {\r\n      const data = JSON.parse(localStorage.getItem(\"Token\"));\r\n      inputFirstname.current.value = data.firstName;\r\n      inputLastname.current.value = data.lastName;\r\n      inputEmail.current.value = data.email;\r\n      inputPhone.current.value = data.phone;\r\n    }\r\n  }, []);\r\n\r\n  const handleInputValidate = (e) => {\r\n    const { name } = e.target;\r\n    const { errorMessage } = validateInput(name, getValueInput(name));\r\n    const newState = { ...stateInput[name] };\r\n    newState.errorMessage = errorMessage;\r\n    setStateInput({ ...stateInput, [name]: newState });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const firstName = inputFirstname.current.value;\r\n    const lastName = inputLastname.current.value;\r\n    const email = inputEmail.current.value;\r\n    const phone = inputPhone.current.value;\r\n    const password = inputPassword.current.value;\r\n    const confirmPassword = inputConfirmPass.current.value;\r\n\r\n    if (\r\n      firstName !== \"\" &&\r\n      lastName !== \"\" &&\r\n      email !== \"\" &&\r\n      phone !== \"\" &&\r\n      password !== \"\" &&\r\n      confirmPassword !== \"\"\r\n    ) {\r\n      if (password !== confirmPassword) {\r\n        NotificationManager.warning(\r\n          \"Warning message\",\r\n          t(\"register.pass-again\")\r\n        );\r\n        return false;\r\n      }\r\n      handleLogin();\r\n    } else NotificationManager.warning(t(\"register.require\"));\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    const user = {\r\n      id: JSON.parse(localStorage.getItem(\"Token\")).id,\r\n      email: inputEmail.current.value,\r\n      firstName: inputFirstname.current.value,\r\n      lastName: inputLastname.current.value,\r\n      password: inputPassword.current.value,\r\n      phone: inputPhone.current.value,\r\n      role: \"menber\",\r\n    };\r\n\r\n    callApi(\r\n      `users/${JSON.parse(localStorage.getItem(\"Token\")).id}`,\r\n      \"put\",\r\n      user\r\n    ).then((res) => {\r\n      if (res && res.status === 200) {\r\n        localStorage.setItem(\r\n          \"Token\",\r\n          JSON.stringify({\r\n            ...res.data,\r\n            password: \"******\",\r\n            role: \"***\",\r\n          })\r\n        );\r\n        NotificationManager.success(t(\"profile.success\"));\r\n        props.history.push(\"/\");\r\n      } else NotificationManager.error(t(\"profile.err\"));\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"register\">\r\n        <div className=\"box\">\r\n          <div className=\"register__content\">\r\n            <div className=\"register__content__title title-content\">\r\n              <h1\r\n                style={{\r\n                  textShadow: \"-2px 2px 2px rgba(229,229,229,0.74)\",\r\n                  textTransform: \"uppercase\",\r\n                }}\r\n              >\r\n                {t(\"edit-profile\")}\r\n              </h1>\r\n            </div>\r\n            <div className=\"register__content__form form\">\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"register__content__form__title1\">\r\n                  <h3\r\n                    style={{\r\n                      textShadow: \"-2px 2px 2px rgba(229,229,229,0.74)\",\r\n                    }}\r\n                  >\r\n                    {t(\"register.h3\")}\r\n                  </h3>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    {t(\"register.first-name\")} <span>*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref={inputFirstname}\r\n                    name=\"firstname\"\r\n                    onKeyUp={handleInputValidate}\r\n                  />\r\n                  <FormError errorMessage={stateInput.firstname.errorMessage} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    {t(\"register.last-name\")} <span>*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    ref={inputLastname}\r\n                    name=\"lastname\"\r\n                    onKeyUp={handleInputValidate}\r\n                  />\r\n                  <FormError errorMessage={stateInput.lastname.errorMessage} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    {t(\"register.email\")} <span>*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    ref={inputEmail}\r\n                    name=\"email\"\r\n                    onKeyUp={handleInputValidate}\r\n                    disabled\r\n                    style={{ background: \"#b9b9b9c7\" }}\r\n                  />\r\n                  <FormError errorMessage={stateInput.email.errorMessage} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    {t(\"register.phone\")} <span>*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"phone\"\r\n                    ref={inputPhone}\r\n                    name=\"phone\"\r\n                    onKeyUp={handleInputValidate}\r\n                  />\r\n                  <FormError errorMessage={stateInput.phone.errorMessage} />\r\n                </div>\r\n                <div className=\"register__content__form__title2\">\r\n                  <h3\r\n                    style={{\r\n                      textShadow: \"-2px 2px 2px rgba(229,229,229,0.74)\",\r\n                    }}\r\n                  >\r\n                    {t(\"register.info-login\")}\r\n                  </h3>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    {t(\"register.password\")} <span>*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"password\"\r\n                    ref={inputPassword}\r\n                    name=\"password\"\r\n                    onKeyUp={handleInputValidate}\r\n                  />\r\n                  <FormError errorMessage={stateInput.password.errorMessage} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>{t(\"register.confirm\")}</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    ref={inputConfirmPass}\r\n                    name=\"confirmPass\"\r\n                    onKeyUp={handleInputValidate}\r\n                  />\r\n                  <FormError\r\n                    errorMessage={stateInput.confirmPass.errorMessage}\r\n                  />\r\n                </div>\r\n                <div className=\"register__content__form__btn btn-form\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    style={{ boxShadow: \"3px 4px 5px 0px rgba(0,0,0,0.75)\" }}\r\n                  >\r\n                    {t(\"profile.btn\")}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    style={{ boxShadow: \"3px 4px 5px 0px rgba(0,0,0,0.75)\" }}\r\n                    onClick={() => props.history.goBack()}\r\n                  >\r\n                    <i className=\"fas fa-reply\"></i>\r\n                    {t(\"register.btn-back\")}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default withRouter(EditProfile);\r\n","import React from \"react\";\r\n\r\nconst FormError = (props) => {\r\n  return (\r\n    <div className=\"text-left text-danger font-italic\">\r\n      {props.errorMessage}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FormError;\r\n"],"sourceRoot":""}